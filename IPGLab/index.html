<!DOCTYPE html>
<html lang="en" style="">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
		<meta name="format-detection" content="telephone=no">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<link rel="icon" href="" />
		<title>IPGLab</title>
		<link rel="stylesheet" type="text/css" href="../css/AngryBirds.css?2">
		<script type="text/javascript" src="../js/flexible.js"></script>
		<link rel="stylesheet" href="../css/bootstrap.min.css">
		<script src="../js/jquery-2.1.4.min.js"></script>
	</head>
	<style>
		#cnzz_stat_icon_1270505203 {
			display: none;
		}
		
		input::-webkit-input-placeholder {
			/*WebKit browsers*/
			color: white;
			line-height: 0.56rem;
			font-size: 0.28rem;
			background-color: rgba(0, 0, 0, 0);
		}
		
		input::-moz-input-placeholder {
			/*Mozilla Firefox*/
			color: white;
			line-height: 0.56rem;
			font-size: 0.28rem;
			background-color: rgba(0, 0, 0, 0);
		}
		
		input::-ms-input-placeholder {
			/*Internet Explorer*/
			color: white;
			line-height: 0.56rem;
			font-size: 0.28rem;
			background-color: rgba(0, 0, 0, 0);
		}
		.score{
			margin-top: 0.266rem;
		}
		.listc{
			margin-top: 0.56rem;
		}
	</style>

	<body>
		<div style="background:url(images/indexlistbg.jpg) no-repeat;background-size: 100% 100%; height: 18.6rem;display: none;" class="wrap" id="app2">
			<div onclick="closelist()" style="width: 1.4rem;height: 1.4rem;position: absolute;left: 8.2rem;top: 1.6rem;"></div>
			<div style="height: 3.4rem;"></div>
			<div style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone0"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore0"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime0">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone1"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore1"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime1">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone2"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore2"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime2">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone3"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore3"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime3">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone4"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore4"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime4">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone5"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore5"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime5">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone6"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore6"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime6">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone7"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore7"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime7">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone8"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore8"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime8">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone9"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore9"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime9">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone10"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore10"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime10">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone11"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore11"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime11">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone12"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore12"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime12">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone13"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore13"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime13">00:00:00</span></span>
			</div>
			<div style="clear: both;"></div>
			<div class="listc" style="color: white;width: 7.8rem;margin-left: 1.7rem;"><span style="float: left;font-size: 0.3rem;" id="listsphone14"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="listsscore14"></span><span style="float: right;margin-right: 0.5rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="listsscoretime14">00:00:00</span></span>
			</div>
		</div>

		<div style="background:url(images/indexbg.jpg) no-repeat;background-size: 100% 100%; height: 18.6rem;" class="wrap" id="app">

			<!--<div style="margin-top: 1rem;text-align: center;font-size: 0.8rem;font-weight: bold;color: yellow;">
				吃币虫<br />
				GREEDY WOREMS
			</div>-->
			<!--<img style="width: 80%;margin-left: 10%;margin-top: 2rem;" src="images/login.png" />-->
			<!--<img style="width: 7.79rem;height: 0.43rem;margin-left: 1.11rem;margin-top: 0.46rem;" src="images/zc2.png" />-->
			<div style="background:url(images/indexipg.png) no-repeat;background-size: 100% 100%;width: 6.4rem;height: 2.2rem;margin-left: 1.9rem;margin-top: 6rem;">
				<div style="height: 1.2rem;margin-top: 0.5rem;width: 3rem;font-size: 0.5rem;color: white;line-height: 1.2rem;margin-left: 2.4rem;position: absolute;" id="ipgs">X0</div>
			</div>
			<!--<div style="width: 5.84rem;height: 1.15rem;margin-left: 2.2rem;margin-top: 6rem;border: 1px solid rgb(204, 204, 204);border-radius: 1rem;background-color: rgba(0,0,0,0.4);">
				
				<input style="float: left;border: 0;height: 0.56rem;margin-top: 0.3rem;width: 5.64rem;font-size: 0.28rem;color: white;line-height: 0.56rem;border-radius: 0;background-color: rgba(0,0,0,0);margin-left: 0.6rem;" placeholder="NAME" type="text" id="name" />
			</div>-->
			<div style="height: 0.4rem;"></div>
			<div style="background:url(images/indexchose.png) no-repeat;background-size: 100% 100%;width: 6.4rem;height: 2.2rem;margin-left: 1.9rem;">
				<img id="coins100" onclick="chose(1)" style="width: 30%;float: left;margin-left: 2%;margin-top: 0.16rem;" src="images/100coinn.png" />
				<img id="coins500" onclick="chose(6)" style="width: 30%;float: left;margin-left: 36%;margin-top: 0.16rem;" src="images/500coinn.png" />
			</div>

			<div style="height: 0.2rem;clear: both;"></div>
			<img style="width: 48%;margin-left: 28%;" src="images/indexts.png" />
			<div style="height: 0.2rem;clear: both;"></div>
			<img id="startbutton" onclick="start()" style="width: 22%;margin-left: 39%;" src="images/indexstartn.png" />
			<div style="height: 0.4rem;"></div>
			<div style="background:url(images/indexlist.png?1) no-repeat;background-size: 100% 100%; height: 4.3rem;margin: auto;width: 9rem;">
				<div onclick="showlist()" style="width: 2.6rem;height: 0.7rem;position: absolute;left: 6.9rem;"></div>
				<div style="height: 0.72rem;"></div>
				<div class="score" style="color: white;width: 7.8rem;margin-left: 1.2rem;"><span style="float: left;font-size: 0.3rem;" id="phone0"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="score0"></span><span style="float: right;margin-right: 0.4rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="scoretime0">00:00:00</span></span>
				</div>
				<div style="clear: both;"></div>
				<div class="score" style="color: white;width: 7.8rem;margin-left: 1.2rem;"><span style="float: left;font-size: 0.3rem;" id="phone1"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="score1"></span><span style="float: right;margin-right: 0.4rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="scoretime1">00:00:00</span></span>
				</div>
				<div style="clear: both;"></div>
				<div class="score" style="color: white;width: 7.8rem;margin-left: 1.2rem;"><span style="float: left;font-size: 0.3rem;" id="phone2"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="score2"></span><span style="float: right;margin-right: 0.4rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="scoretime2">00:00:00</span></span>
				</div>
				<div style="clear: both;"></div>
				<div class="score" style="color: white;width: 7.8rem;margin-left: 1.2rem;"><span style="float: left;font-size: 0.3rem;" id="phone3"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="score3"></span><span style="float: right;margin-right: 0.4rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="scoretime3">00:00:00</span></span>
				</div>
				<div style="clear: both;"></div>
				<div class="score" style="color: white;width: 7.8rem;margin-left: 1.2rem;"><span style="float: left;font-size: 0.3rem;" id="phone4"></span><span style="float: left;margin-left: 0.2rem;font-size: 0.3rem;">最高積分</span><span style="float: left;margin-left: 0.2rem;color: #fff900;font-size: 0.3rem;" id="score4"></span><span style="float: right;margin-right: 0.4rem;color: #fff900;font-size: 0.3rem;">倒計時：<span style="font-size: 0.3rem;" id="scoretime4">00:00:00</span></span>
				</div>

			</div>
		</div>
		<script src="https://code.jquery.com/jquery-3.2.1.min.js "></script>
		<script src="../js/base/util.js"></script>
		<script src="../js/base/url.js"></script>
		<script src="../js/base/base_net.js"></script>
		<script src="../js/gVerify.js"></script>
	</body>
	<script src="../js/bootstrap.min.js"></script>
	<script>
		var coin = 0;
		var name = '';
		var uid = "";
		var phone = "";
		var moneyi = 0;
		var isback = true;
		var cashc = 0;
		uid = getLocal("pigUID");
		phone = getLocal("pigphone");
		$(document).ready(function() {
			if(uid && uid != null && uid != "null") {

			} else {
				window.location.href = "login.html";
			}
			req(IPG_USER_MONEY_QUERY, {
					'uid': uid
				}, function(data) {
					var dat = data.userMoney;
					var money = dat.money;
					moneyi = money
					$("#ipgs").text("X" + money)
					req(IPG_GAME_LIST, {
							'game_name': "IPGLab"
						}, function(data) {
							var dat = data.game_list;
							var len = dat.length;
							for(var i = 0; i < dat.length; i++) {
								for(var j = i + 1; j < dat.length; j++) {
									if(dat[i].phone == dat[j].phone) {
										dat.splice(j, 1)
										len = len -1;
										j = j-1;
									}
								}
							}

							for(var s = 0; s < 5; s++) {
								var timeStamp = new Date(new Date(Number(dat[s].ctime) * 1000).setHours(0, 0, 0, 0)) / 1000;
								var ntimeStamp = new Date().setHours(0, 0, 0, 0) / 1000;
								var nus = Math.round(new Date().getTime() / 1000);
								var b1 = Number(nus) - Number(ntimeStamp)
								var b2 = Number(dat[s].ctime) - Number(timeStamp)
								if(b1 <= b2) {
									nu = b2 - b1
								} else {
									nu = b2 + 86400 - b1
								}
								countDown(nu, "scoretime" + s)
								$("#phone" + s).text(dat[s].phone.substr(0, 3) + "****" + dat[s].phone.substr(7, 11))
								$("#score" + s).text(dat[s].score)
							}
							var listlen = 15
							if(dat.length < 15) {
								listlen = dat.length
							}
							for(var s = 0; s < listlen; s++) {
								var timeStamp = new Date(new Date(Number(dat[s].ctime) * 1000).setHours(0, 0, 0, 0)) / 1000;
								var ntimeStamp = new Date().setHours(0, 0, 0, 0) / 1000;
								var nus = Math.round(new Date().getTime() / 1000);
								var b1 = Number(nus) - Number(ntimeStamp)
								var b2 = Number(dat[s].ctime) - Number(timeStamp)
								if(b1 <= b2) {
									nu = b2 - b1
								} else {
									nu = b2 + 86400 - b1
								}
								if(s > 5) {
									if(b1 > 43200) {
										nu = 86400 + 43200 - b1
									} else {
										nu = 43200 - b1
									}
								}
								countDown(nu, "listsscoretime" + s)
								$("#listsphone" + s).text(dat[s].phone.substr(0, 3) + "****" + dat[s].phone.substr(7, 11))
								$("#listsscore" + s).text(dat[s].score)
							}
						},
						function(e) {
							alert("獲取用戶信息失敗，請刷新頁面重試")
						})
				},
				function(e) {
					alert("獲取用戶信息失敗，請刷新頁面重試")
				})
		})
		
		function showlist() {
			$("#app").hide()
			$("#app2").show()
		}

		function closelist() {
			$("#app2").hide()
			$("#app").show()
		}

		function countDown(times, s) {
			var timer = null;
			var hours = 0,
				minutes = 0,
				seconds = 0;
			timer = setInterval(function() {
				var day = 0,
					hour = 0,
					minute = 0,
					second = 0; //时间默认值
				if(times > 0) {
					day = Math.floor(times / (60 * 60 * 24));
					hour = Math.floor(times / (60 * 60)) - (day * 24);
					minute = Math.floor(times / 60) - (day * 24 * 60) - (hour * 60);
					second = Math.floor(times) - (day * 24 * 60 * 60) - (hour * 60 * 60) - (minute * 60);
				} else {
					times = 0;
				}

				if(hour <= 9) {
					hours = "0" + hour;
				} else {
					hours = hour
				}
				if(minute <= 9) {
					minutes = "0" + minute;
				} else {
					minutes = minute;
				}
				if(second <= 9) {
					seconds = "0" + second;
				} else {
					seconds = second;
				}

				$("#" + s).text(hours + ":" + minutes + ":" + seconds)

				//
				//  console.log(day+"天:"+hour+"小时："+minute+"分钟："+second+"秒");
				times--;
			}, 1000);
			if(times <= 0) {
				clearInterval(timer);
			}
		}

		function chose(x) {
			if(moneyi < x) {
				alert("您沒有那麽多籌碼")
				return
			}
			if(x == 1) {
				cashc = 10
				$("#coins100").attr("src", "images/100coiny.png")
				$("#coins500").attr("src", "images/500coinn.png")
			}
			if(x == 6) {
				cashc = 50
				$("#coins100").attr("src", "images/100coinn.png")
				$("#coins500").attr("src", "images/500coiny.png")
			}
			$("#startbutton").attr("src", "images/indexstarty.png")
			coin = x;
		}

		function start() {
			if(isback == false) {
				return;
			}
			if(coin == 0) {
				alert("請先選擇籌碼！")
				return
			}
			if(uid && uid != null && uid != "null") {

			} else {
				alert("請先登錄")
				window.location.href = "login.html";
				return
			}
			if(moneyi < coin) {
				alert("您沒有那麽多籌碼")
				return
			}
			isback = false
			req(IPG_GAME_CASH, {
					'uid': uid,
					'game_cash_money1': cashc,
					'game_name': 'IPGLab'
				}, function(data) {
					isback = true;
					window.location.href = "game.html?coin=" + coin;
				},
				function(e) {
					isback = true;
					alert(e.msg)
					window.location.href = "game.html?coin=" + coin;
				})

		}

		function getUrlParam(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
			var r = window.location.search.substr(1).match(reg); //匹配目标参数
			if(r != null) return unescape(r[2]);
			return null; //返回参数值
		}
	</script>

</html>