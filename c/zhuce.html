<!DOCTYPE html>
<html lang="en" style="background-color: white;">

	<head>
		<meta charset="utf-8">
		<link rel="icon" href="" />
		<title>复仇的小猪账号注册</title>
		<meta name="keywords" content="对战版愤怒的小鸟">
		<meta name="description" content="愤怒的小鸟对战版">
		<link rel="stylesheet" type="text/css" href="css/AngryBirds.css">
		<script type="text/javascript" src="js/flexible.js"></script>
		<script src="https://cdn.dingxiang-inc.com/ctu-group/captcha-ui/index.js"></script>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<script src="js/jquery-2.1.4.min.js"></script>
	</head>
	<style>
		#cnzz_stat_icon_1270505203 {
			display: none;
		}
		
		input::-webkit-input-placeholder {
			/*WebKit browsers*/
			color: rgb(204, 204, 204);
			line-height: 0.56rem;
			font-size: 0.28rem;
		}
		
		input::-moz-input-placeholder {
			/*Mozilla Firefox*/
			color: rgb(204, 204, 204);
			line-height: 0.56rem;
			font-size: 0.28rem;
		}
		
		input::-ms-input-placeholder {
			/*Internet Explorer*/
			color: rgb(204, 204, 204);
			line-height: 0.56rem;
			font-size: 0.28rem;
		}
		
		.fr {
			float: right;
			display: inline-block;
		}
		
		.row {
			margin-left: 0;
			margin-right: 0;
		}
	</style>

	<body>

		<nav class="navbar navbar-default navbar-inverse" style="margin-bottom: 0;">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">

						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">语言 <span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a href="#">中文</a>
								</li>
								<li>
									<a href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=zh-CN%7Cen', 'Chinese_to_English', 'resizable,scrollbars,status'))">English</a>
								</li>
								<li>
									<a href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=zh-CN%7Cja', 'Chinese_to_Japanese', 'resizable,scrollbars,status'))">日本語</a>
								</li>
								<li>
									<a href="javascript: void(window.open('http://translate.google.com/translate?u='+escape(location.href)+'&amp;langpair=zh-CN%7Cko', 'Chinese_to_Korean', 'resizable,scrollbars,status'))">한국어.</a>
								</li>
							</ul>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a href="index.html">首页</a>
						</li>
						<!--<li>
							<a href="buy.html">兑换套餐</a>
						</li>
						<li>
							<a href="twoDimension.html">邀请好友</a>
						</li>-->
						<li>
							<a href="http://gopig.io/IPGWhitePaper.pdf">下载白皮书</a>
						</li>

						<!--<li id="logn" style="display: none;">
							<a href="person.html"><span class="glyphicon glyphicon-user"> </span></a>
						</li>-->
						<li id="nologn">
							<a href="denglu.html">登录</a>
						</li>
						<li class="active">
							<a>注册</a>
						</li>

					</ul>

				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container-fluid -->
		</nav>
		<div class="row" style="margin-left: 0;margin-right: 0;">
			<div style="padding-left: 0;padding-right: 0;" class="col-md-12">
				<img src="images/img3.png" class="img-responsive" alt="Responsive image">
				<img class="img-responsive" alt="Responsive image" style="width: 35%;position: absolute;margin-left: 32%;margin-top: -25%;" src="images/img3.gif" />
			</div>
		</div>
		<div class="row">
			<div style="padding-right: 0;padding-left: 0;width: 15%;" class="col-md-2">
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
			</div>

			<div style="padding-right: 0;padding-left: 0;background-color: #3da900;width: 70%;" class="col-md-8">
				<div style="height:  0.4rem;"></div>
				<div style="width: 90%;margin-left: 5%;background-color: white;border-radius: 0.3rem;">
					<div style="height:  0.4rem;"></div>
					<img style="width: 80%;margin-left: 10%;margin-top: 0.46rem;" src="images/zc2.png" />

					<div style="width: 80%;height: 1.15rem;margin-left: 10%;margin-top: 0.86rem;border: 1px solid rgb(204, 204, 204);border-radius: 1rem;">
						<img style="width: 0.31rem;height: 0.46rem;float: left;margin-left: 0.51rem;margin-top: 0.35rem;" src="images/zc3.png" />
						<input style="float: left;border: 0;border-left: 0.03rem solid rgb(204, 204, 204);margin-left: 0.28rem;height: 0.56rem;margin-top: 0.3rem;width: 84%;padding-left: 0.31rem;font-size: 0.28rem;color: #535376;line-height: 0.56rem;border-radius: 0;" placeholder="请输入手机号" type="tel" id="phone" />
					</div>
					<div style="width: 80%;height: 1.15rem;margin-left: 10%;margin-top: 0.46rem;border: 1px solid rgb(204, 204, 204);border-radius: 1rem;">
						<img style="width: 0.32rem;height: 0.46rem;float: left;margin-left: 0.51rem;margin-top: 0.31rem;" src="images/zc4.png" />
						<input style="float: left;border: 0;border-left: 0.03rem solid rgb(204, 204, 204);margin-left: 0.27rem;height: 0.56rem;margin-top: 0.3rem;width: 84%;padding-left: 0.31rem;font-size: 0.28rem;color: #535376;line-height: 0.56rem;border-radius: 0;" placeholder="请输入密码" type="password" id="password" />
					</div>
					<div style="width: 80%;height: 1.15rem;margin-left: 10%;margin-top: 0.46rem;border: 1px solid rgb(204, 204, 204);border-radius: 1rem;">
						<img style="width: 0.32rem;height: 0.35rem;float: left;margin-left: 0.51rem;margin-top: 0.4rem;" src="images/zc5.png" />
						<input style="float: left;border: 0;border-left: 0.03rem solid rgb(204, 204, 204);margin-left: 0.27rem;height: 0.56rem;margin-top: 0.3rem;width: 84%;padding-left: 0.31rem;font-size: 0.28rem;color: #535376;line-height: 0.56rem;border-radius: 0;" placeholder="imToken地址(选填)" type="text" id="address" />
					</div>
					<div style="width: 80%;height: 1.15rem;margin-left: 10%;margin-top: 0.46rem;border: 1px solid rgb(204, 204, 204);border-radius: 1rem;">
						<img style="width: 0.38rem;height: 0.4rem;float: left;margin-left: 0.46rem;margin-top: 0.38rem;" src="images/zc6.png" />
						<input style="float: left;border: 0;border-left: 0.03rem solid rgb(204, 204, 204);margin-left: 0.27rem;height: 0.56rem;margin-top: 0.3rem;width: 84%;padding-left: 0.31rem;font-size: 0.28rem;color: #535376;line-height: 0.56rem;border-radius: 0;" placeholder="邀请码(选填)" type="text" id="inviteCode" />
					</div>
					<div style="margin-left: 34%;margin-top: 0.5rem;" id="c1"></div>
					<img onclick="register()" style="width: 50%;margin-top: 0.5rem;margin-left: 25%;" src="images/zc7.png" />
					<img onclick="agreement()" style="width: 30%;margin-top: 0.31rem;margin-left: 35%;" src="images/zc8.png" />
					<div style="width: 90%;border-radius: 0.3rem;margin-top: 0.67rem;margin-left: 5%;background-color: #5DA615;">
						<div style="height: 0.82rem;"></div>
						<img style="width: 30%;margin-left: 35%;" src="images/zc9.png" />
						<img style="width: 20%;margin-top: 0.36rem;margin-left: 40%;" src="images/zc10.png" />
						<div style="height: 0.82rem;"></div>
					</div>

					<div style="height: 0.8rem;"></div>
				</div>
				<img src="images/zc11.png" />
			</div>

			<div style="padding-right: 0;padding-left: 0;width: 15%;" class="col-md-2">
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />
				<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
				<!--<img class="img-responsive" alt="Responsive image" src="images/img46.png" />-->
			</div>
		</div>

		<script src="js/base/util.js"></script>
		<script src="js/base/url.js"></script>
		<script src="js/base/base_net.js"></script>
		<script src="js/gVerify.js"></script>
	</body>
	<script src="js/bootstrap.min.js"></script>
	<script>
		var is_code = true;
		var isback = true;
		var uid = '';
		var tk = '';
		$(document).ready(function() {
			var info_id = getUrlParam("info_id");
			$("#inviteCode").val(info_id);
		})

		function register() {
			if(isback == false) {
				return;
			}

			var phone = $("#phone").val()
			var password = $("#password").val()
			//			var email = $("#email").val()
			//			var weixin = $("#weixin").val()
			var inviteCode = $("#inviteCode").val()
			//			var name = $("#name").val()
			var address = $("#address").val()

			if(phone == '' || phone == null || phone == 'null') {
				alert("手机号不能为空")
				return
			}
			if(!(/^1[0-9][0-9]\d{8}$/.test(phone))) {
				alert("不是完整的11位手机号或者正确的手机号前七位");
				return false;
			}

//			if(inviteCode == '' || inviteCode == null || inviteCode == 'null') {
//				alert("邀请码不能为空")
//				return
//			}
			//
			//			if(weixin == '' || weixin == null || weixin == 'null') {
			//				alert("微信号不能为空")
			//				return
			//			}
			//			if(name == '' || name == null || name == 'null') {
			//				alert("姓名不能为空")
			//				return
			//			}

			if(password.length < 6) {
				alert("密码至少6位！")
				return
			} else if(password == '' || password == null || password == 'null') {
				alert("密码不能为空！")
				return
			}
			//			if(address == '' || address == null || address == 'null') {
			//				alert("地址不能为空")
			//				return
			//			}
			if(tk == '') {
				alert("请先完成智能验证")
				return
			}
			isback = false;
			req(USER_IPG_REGISTER_URL, {
				'phone': phone,
				'password': password,
				//				'email': email,
				//				'weixin': weixin,
				'inviteCode': inviteCode,
				//				'username': name,
				'address': address,
				'token': tk
			}, function(data) {

				alert("注册成功！请记住密码：" + password)
				uid = data.user.uid
				setItem("pigUID", uid)
				setLocal("pigUID", uid)
				setLocal("pigphone", phone)
				setItem("pigphone", phone)
				isback = true;
				window.location = 'index.html'

			}, function(err) {
				isback = true;
				console.log(err.msg)
				alert(err.msg)
			})

		}

		function back() {
			history.go(-1)
		}

		function getUrlParam(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
			var r = window.location.search.substr(1).match(reg); //匹配目标参数
			if(r != null) return unescape(r[2]);
			return null; //返回参数值
		}

		var myCaptcha = _dx.Captcha(document.getElementById('c1'), {
			appId: 'ccd387e44f717b10b6edf16c83261cb0', //appId,开通服务后可在控制台中“服务管理”模块获取
			style: 'embed',
			width: 300,
			success: function(token) {
				console.log('token:', token)
				tk = token
			},
			fail: function(e) {
				console.log(e)
				alert("验证失败，请重试")
				myCaptcha.reload()
			}
		})

		function agreement() {
			window.location = 'agreementText.html'
		}
	</script>

</html>