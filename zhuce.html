<!DOCTYPE html>
<html lang="en" style="background-color: white;">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
		<meta name="format-detection" content="telephone=no">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<link rel="icon" href="" />
		<title>复仇的小猪账号注册</title>
		<meta name="keywords" content="对战版愤怒的小鸟">
		<meta name="description" content="愤怒的小鸟对战版">
		<link rel="stylesheet" type="text/css" href="css/AngryBirds.css?2">
		<script type="text/javascript" src="js/flexible.js"></script>
		<script src="https://cdn.dingxiang-inc.com/ctu-group/captcha-ui/index.js"></script>
		<link rel="stylesheet" href="css/bootstrap.min.css">
	</head>
	<style>
		#cnzz_stat_icon_1270505203 {
			display: none;
		}
		
		input::-webkit-input-placeholder {
			/*WebKit browsers*/
			color: rgba(0, 0, 0, 0.51);
			font-size: 0.38rem;
			letter-spacing: 0;
			text-align: left;
		}
		
		input::-moz-input-placeholder {
			/*Mozilla Firefox*/
			color: rgba(0, 0, 0, 0.51);
			font-size: 0.38rem;
			letter-spacing: 0;
			text-align: left;
		}
		
		input::-ms-input-placeholder {
			/*Internet Explorer*/
			color: rgba(0, 0, 0, 0.51);
			font-size: 0.38rem;
			letter-spacing: 0;
			text-align: left;
		}
	</style>

	<body>

		<div class="wrap" id="app">
			<div class="header2 clearfix" style="color: white;background-color: #080808;">
				<div class="fl sanjiao glyphicon glyphicon-chevron-left" onclick="back()"></div>
				<div class="head_txt" style="color: white;">账号注册&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</div>
			<div style="width: 100%;height: 5rem;background-color: #02b1c5;">
				<div style="color: #333;text-align: center;font-size: 0.8rem;padding-top: 1.1rem;">欢迎加入复仇的小猪</div>
				<div style="color: #333;text-align: center;font-size: 0.8rem;margin-top: 0.2rem;">注册即送100个IPG!</div>
			</div>
			<!--<div style="width: 90%;margin-top: 0.2rem;margin-left: 5%;">
				<img style="width: 100%;" src="images/zc.jpg" />
			</div>
			<div style="text-align: center;height: 0.5375rem;line-height: 0.5375rem;font-size: 0.38rem;color: #4B4B4B;letter-spacing: -0.51px;margin-top: 0.3483rem;font-weight: bold;">
				复仇的小猪
			</div>-->

			<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.8rem;margin-left: 0.5rem;">
				手机号
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="tel" id="phone" />
			</div>
			<!--<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				昵称
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="text" id="name" />
			</div>
			<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				邮箱
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="email" id="email" />
			</div>
			<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				微信号
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="text" id="weixin" />
			</div>-->
			<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				密码
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="password" id="password" />
			</div>
			<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				imToken地址(选填)
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="text" id="address" />
			</div>
			<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				邀请码(选填)
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="text" id="inviteCode" />
			</div>
			<div style="margin-left: 0.5rem;margin-top: 0.4rem;" id="c1"></div>
			<!--<div style="width: 9rem;height: 2.1rem;background: #FFFFFF;border: 0rem solid #DCE2EE;border-radius: 0.1333rem;margin-top: 0.4rem;margin-left: 0.5rem;">
				验证码
				<input style="width: 9rem;height: 1.5rem;line-height: 1.5rem;background: #FFFFFF;border: 0.0258rem solid #DCE2EE;border-radius: 0.1333rem;text-align: left;font-size: 0.4042rem;color: #535376;font-weight: bold;letter-spacing: -0.0086rem;padding: 0.5rem;" type="text" id="pic_id" />
				<img src="" id="pic_code" style="width: 2.1801rem;height: 1.3459rem;border-radius: 0.1333rem;position: absolute;margin-top: -1.42rem;margin-left: 6.7rem;" onclick="changePic()">
			</div>-->
			<div onclick="register()" style="width: 6.7209rem;height: 1.3459rem;background: #333;border-radius: 0.1333rem;margin-top: 0.5375rem;line-height: 1.3459rem;text-align: center;font-size: 0.38rem;color: white;font-weight: bold;letter-spacing: -0.0129rem;margin-left: 1.6942rem;">
				注册领IPG
			</div>
			<div style="width: 4.3rem;height: 0.7525rem;margin-left: 2.9283rem;margin-top: 0.1892rem;font-size: 0.3225rem;line-height: 0.3225rem;color: #999999;text-align: center;">注册成功即视为阅读并已同意<br /><span onclick="agreement()" style="text-align: center;color: #F5A623;height: 0.3225rem;line-height: 0.5rem;font-size: 0.3225rem;">《服务协议》</span></div>
			<div style="background-color: #333;margin-top: 0.6rem;">
				<div style="text-align: center;color: #5bb2fc;padding-top: 0.4rem;font-size: 0.5rem;font-weight: bold;">官方联系方式</div>
				<div style="text-align: center;color: white;margin-top: 0.1rem;font-size: 0.3rem;font-weight: bold;">ipg_foundation@aliyun.com</div>
				<div style="text-align: center;color: white;margin-top: 0.1rem;font-size: 0.3rem;font-weight: bold;">微信：bibiblueblue</div>
				<div style="text-align: center;color: white;margin-top: 0.1rem;font-size: 0.3rem;font-weight: bold;">加入官方微信群：</div>
				<img style="width: 20%;margin-left: 40%;margin-top: 0.1rem;" src="images/qun.png" />
				<div style="height: 0.4rem;"></div>
			</div>
		</div>
		<script src="https://code.jquery.com/jquery-3.2.1.min.js "></script>
		<script src="js/base/util.js"></script>
		<script src="js/base/url.js"></script>
		<script src="js/base/base_net.js"></script>
		<script src="js/gVerify.js"></script>
	</body>
	<script src="js/bootstrap.min.js"></script>
	<script>
		var is_code = true;
		var isback = true;
		var uid = '';
		var tk = '';
		$(document).ready(function() {
			var info_id = getUrlParam("info_id");
			$("#inviteCode").val(info_id);
		})

		function register() {
			if(isback == false) {
				return;
			}

			var phone = $("#phone").val()
			var password = $("#password").val()
			//			var email = $("#email").val()
			//			var weixin = $("#weixin").val()
			var inviteCode = $("#inviteCode").val()
			//			var name = $("#name").val()
			var address = $("#address").val()

			if(phone == '' || phone == null || phone == 'null') {
				alert("手机号不能为空")
				return
			}
			if(!(/^1[0-9][0-9]\d{4,8}$/.test(phone))) {
				alert("不是完整的11位手机号或者正确的手机号前七位");
				return false;
			}

			//			if(email == '' || email == null || email == 'null') {
			//				alert("邮箱不能为空")
			//				return
			//			}
			//
			//			if(weixin == '' || weixin == null || weixin == 'null') {
			//				alert("微信号不能为空")
			//				return
			//			}
			//			if(name == '' || name == null || name == 'null') {
			//				alert("姓名不能为空")
			//				return
			//			}

			if(password.length < 6) {
				alert("密码至少6位！")
				return
			} else if(password == '' || password == null || password == 'null') {
				alert("密码不能为空！")
				return
			}
//			if(address == '' || address == null || address == 'null') {
//				alert("地址不能为空")
//				return
//			}
			if(tk == '') {
				alert("请先完成智能验证")
				return
			}
			isback = false;
			req(USER_IPG_REGISTER_URL, {
				'phone': phone,
				'password': password,
				//				'email': email,
				//				'weixin': weixin,
				'inviteCode': inviteCode,
				//				'username': name,
				'address': address,
				'token': tk
			}, function(data) {

				alert("注册成功！请记住密码：" + password)
				uid = data.user.uid
				setItem("pigUID", uid)
				setLocal("pigUID", uid)
				setLocal("pigphone", phone)
				setItem("pigphone", phone)
				isback = true;
				window.location = 'index.html'

			}, function(err) {
				isback = true;
				console.log(err.msg)
				alert(err.msg)
			})

		}

		function back() {
			history.go(-1)
		}

		function getUrlParam(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
			var r = window.location.search.substr(1).match(reg); //匹配目标参数
			if(r != null) return unescape(r[2]);
			return null; //返回参数值
		}

		var myCaptcha = _dx.Captcha(document.getElementById('c1'), {
			appId: 'ccd387e44f717b10b6edf16c83261cb0', //appId,开通服务后可在控制台中“服务管理”模块获取
			style: 'embed',
			width: 300,
			success: function(token) {
				console.log('token:', token)
				tk = token
			},
			fail: function(e) {
				console.log(e)
				alert("验证失败，请重试")
				myCaptcha.reload()
			}
		})

		function agreement() {
			window.location = 'agreementText.html'
		}
	</script>

</html>